<html> 
<head>
  <style>
   *{padding: 0; margin:0;}
   canvas{ background: #eee; display: block; margin: 0 auto;}
   </style>
</head>
<body>
<canvas id= "myCanvas" width="256" height="240"></canvas>
<script type="text/javascript">
let canvas = document.getElementById("myCanvas");
let ctx = canvas.getContext("2d");
document.body.style.zoom = "275%"
//document.addEventListener("keydown",keyDownHandler, false);
//document.addEventListener("keyup",keyUpHandler,false);
let fps = 60;
let worldTiles = new Image();
worldTiles.src = "assets/tiles-overworld.png"; 

// Tiles fall in an array of:
// COLS = 0 - 17
// ROWS = 0 - 7

let map7_7 = [
   [ 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22],
   [ 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22],
   [ 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22],
   [ 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22],

   // End of the HUD

   [ 61, 61, 61, 61, 61, 61, 61,  2,  2, 61, 61, 61, 61, 61, 61, 61],
   [ 61, 61, 61, 61, 28, 61, 61,  2,  2, 61, 61, 61, 61, 61, 61, 61],
   [ 61, 61, 61, 62,  2,  2,  2,  2,  2, 61, 61, 61, 61, 61, 61, 61],
   [ 61, 61, 62,  2,  2,  2,  2,  2,  2, 61, 61, 61, 61, 61, 61, 61],
   [ 61, 62,  2,  2,  2,  2,  2,  2,  2, 60, 61, 61, 61, 61, 61, 61],
   [  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2],
   [ 43, 44,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2, 43, 43],
   [ 61, 61,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2, 61, 61],
   [ 61, 61,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2, 61, 61],
   [ 61, 61, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 61, 61],
   [ 61, 61, 61, 61, 61, 61, 61,  2,  2, 61, 61, 61, 61, 61, 61, 61]
];

const drawMap = (level) => {
   for (var i = 0; i < level.length; i++) {
      for(var j = 0; i < level[i].length; j++) {
         ctx.drawImage(
            worldTiles, // Sprite sheet
            ((level[i][j] % 18) * 17) + 1, // Column
            (Math.floor(level[i][j] / 18) * 17) + 1, // Row
            16, // sprite width
            16, // sprite height
            j * 16, // draw this x
            i * 16, // draw this y
            16, // draw x
            16  // draw y
         )
      }
   }
}

const draw = () => {
   setTimeout(function() {
   requestAnimationFrame(draw);
   ctx.fillStyle = "rgb(20,20,20)";
   ctx.fillRect(0,0,256,240);
   //all code goes here
   drawMap(map7_7);
   },1000/fps);
}
draw();

</script>
</body>
</html>